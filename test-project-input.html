<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¡¹ç›®è¾“å…¥æ§ä»¶æµ‹è¯•</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div style="max-width: 600px; margin: 2rem auto; padding: 2rem; background: white; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
        <h1>ğŸ§ª é¡¹ç›®è¾“å…¥æ§ä»¶æµ‹è¯•</h1>
        
        <div class="form-group">
            <label for="taskProject">æ‰€å±é¡¹ç›®</label>
            <div class="project-input-container">
                <select id="taskProjectSelect" class="form-input project-select">
                    <option value="">é€‰æ‹©å·²æœ‰é¡¹ç›®...</option>
                    <option value="æ–°ç–†ç”µç½‘äºŒæœŸ">æ–°ç–†ç”µç½‘äºŒæœŸ</option>
                    <option value="åœ°ç¾é¢„è­¦">åœ°ç¾é¢„è­¦</option>
                    <option value="æ–°å»ºç”µç½‘äºŒæœŸ">æ–°å»ºç”µç½‘äºŒæœŸ</option>
                </select>
                <input type="text" id="taskProject" class="form-input project-input" 
                       placeholder="æˆ–è¾“å…¥æ–°é¡¹ç›®åç§°" required>
                <button type="button" class="btn-toggle-input" id="toggleProjectInput" 
                        title="åˆ‡æ¢è¾“å…¥æ–¹å¼">
                    <i class="fas fa-edit"></i>
                </button>
            </div>
            <div class="project-input-hint">
                <small>ğŸ’¡ é€‰æ‹©å·²æœ‰é¡¹ç›®æˆ–è¾“å…¥æ–°é¡¹ç›®åç§°</small>
            </div>
        </div>

        <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
            <h3>æµ‹è¯•è¯´æ˜ï¼š</h3>
            <ul>
                <li>é»˜è®¤æ˜¾ç¤ºé¡¹ç›®é€‰æ‹©ä¸‹æ‹‰æ¡†</li>
                <li>ç‚¹å‡»ç¼–è¾‘æŒ‰é’®åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼</li>
                <li>é€‰æ‹©é¡¹ç›®æ—¶ä¼šè‡ªåŠ¨åŒæ­¥åˆ°è¾“å…¥æ¡†</li>
                <li>åœ¨è¾“å…¥æ¡†è¾“å…¥æ—¶ä¼šæ¸…é™¤é€‰æ‹©</li>
                <li>æ”¯æŒè¾“å…¥æ–°é¡¹ç›®åç§°</li>
            </ul>
        </div>

        <div style="margin-top: 1rem; padding: 1rem; background: #e3f2fd; border-radius: 8px;">
            <h4>å½“å‰å€¼ï¼š</h4>
            <p>é€‰æ‹©æ¡†å€¼: <span id="selectValue">æ— </span></p>
            <p>è¾“å…¥æ¡†å€¼: <span id="inputValue">æ— </span></p>
            <p>å½“å‰æ¨¡å¼: <span id="currentMode">é€‰æ‹©æ¨¡å¼</span></p>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–é¡¹ç›®è¾“å…¥æ§ä»¶
        function initProjectInput() {
            const container = document.querySelector('.project-input-container');
            const projectSelect = document.getElementById('taskProjectSelect');
            const projectInput = document.getElementById('taskProject');
            const toggleBtn = document.getElementById('toggleProjectInput');
            
            // è®¾ç½®åˆå§‹çŠ¶æ€ä¸ºé€‰æ‹©æ¨¡å¼
            container.classList.add('select-mode');
            updateDisplay();
            
            // åˆ‡æ¢è¾“å…¥æ–¹å¼
            toggleBtn.addEventListener('click', () => {
                if (container.classList.contains('select-mode')) {
                    // åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼
                    container.classList.remove('select-mode');
                    container.classList.add('input-mode');
                    projectInput.focus();
                    toggleBtn.title = 'åˆ‡æ¢åˆ°é€‰æ‹©æ¨¡å¼';
                } else {
                    // åˆ‡æ¢åˆ°é€‰æ‹©æ¨¡å¼
                    container.classList.remove('input-mode');
                    container.classList.add('select-mode');
                    projectSelect.focus();
                    toggleBtn.title = 'åˆ‡æ¢åˆ°è¾“å…¥æ¨¡å¼';
                }
                updateDisplay();
            });
            
            // é¡¹ç›®é€‰æ‹©å˜åŒ–æ—¶åŒæ­¥åˆ°è¾“å…¥æ¡†
            projectSelect.addEventListener('change', () => {
                if (projectSelect.value) {
                    projectInput.value = projectSelect.value;
                }
                updateDisplay();
            });
            
            // è¾“å…¥æ¡†å˜åŒ–æ—¶æ¸…é™¤é€‰æ‹©
            projectInput.addEventListener('input', () => {
                projectSelect.value = '';
                updateDisplay();
            });
        }

        // æ›´æ–°æ˜¾ç¤º
        function updateDisplay() {
            const container = document.querySelector('.project-input-container');
            const projectSelect = document.getElementById('taskProjectSelect');
            const projectInput = document.getElementById('taskProject');
            
            document.getElementById('selectValue').textContent = projectSelect.value || 'æ— ';
            document.getElementById('inputValue').textContent = projectInput.value || 'æ— ';
            document.getElementById('currentMode').textContent = 
                container.classList.contains('select-mode') ? 'é€‰æ‹©æ¨¡å¼' : 'è¾“å…¥æ¨¡å¼';
        }

        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initProjectInput);
    </script>
</body>
</html>
